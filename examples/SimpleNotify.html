<!DOCTYPE html>
<html>
<head>

	<title>Simple Notify</title>

	<meta charset='utf-8' />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link href="/lib/simple-notify-1.0.5/simple-notify.css" type="text/css" rel="stylesheet">
	<script src="/lib/simple-notify-1.0.5/simple-notify.min.js"></script>

	<style>
		body {
			box-sizing: border-box;
			margin: 0;
			padding: 16px;
			height: 100vh;
		}
		.sn-notifications-container {
			box-sizing: border-box; /* Làm cho khung screen ko vượt quá viền */
		}
	</style>

</head>
<body>

	<!--
		https://simple-notify.github.io/simple-notify/
	-->

	<button onclick="mt.toast('info', 'Thông báo có phiên bản mới')">Toast Info</button>
	<button onclick="mt.toast('success', 'Lưu thành công')">Toast Success</button>
	<button onclick="mt.toast('warning', 'Cảnh báo chưa nhập trường Email')">Toast Warning</button>
	<button onclick="mt.toast('error', 'Không kết nối được máy chủ!')">Toast Error</button>
	<button onclick="mt.testConfirm()">Confirm</button>

	<script type="module">
		var mt = {
			p_confirm: null,

			init() {

				// Bind Global
				window.mt = this;
			},
			toast(type, msg) {

				if ([].includes(type)) {
					this.noti('error', "Type không hợp lệ!");
					return;
				}

				let title = '';
				switch (type) {
					case 'info':
						title = "Thông báo";
						break;
					case 'success':
						title = "Thành công";
						break;
					case 'warning':
						title = "Cảnh báo";
						break;
					case 'error':
						title = "Lỗi";
						break;
				}

				// Prepare
				let opts = {
					status: type,
					title: title,
					text: msg,
					effect: 'slide',
					speed: 300,
					customClass: '',
					customIcon: '',
					showIcon: true,
					showCloseButton: true,
					autoclose: true,
					autotimeout: 3000,
					notificationsGap: null,
					notificationsPadding: null,
					type: 'outline',
					position: 'right bottom',
					customWrapper: '',
				};

				// Show Toast
				new Notify(opts);
			},
			confirm(type, title, message, confirm, cancel) {

				if (this.p_confirm != null)
					return;

				return new Promise((resolve, reject) => {
					this.p_confirm = { resolve, reject };
					this.p_confirm.popup = new Notify({
						status: type,
						title: title,
						showCloseButton: false,
						autoclose: false,
						position: 'center',
						text: `
							<div class="confirm-popup">
								<p>${message}</p>
								<div class="group-btn-confirm" style="display:flex;flex-direction:row-reverse;gap:4px;">
									<button class="btn-cancel" onclick="mt.confirmCallback('cancel')">${cancel}</button>
									<button class="btn-confirm" onclick="mt.confirmCallback('confirm')">${confirm}</button>
								</div>
							</div>
						`,
					});
				});
			},
			confirmCallback(buttonCode) {

				if (this.p_confirm == null)
					return;

				mt.p_confirm.popup.close();
				mt.p_confirm.resolve(buttonCode);
				mt.p_confirm = null;
			},
			async testConfirm() {
				let wat = await mt.confirm('warning', 'Xác nhận xóa', 'Có muốn xóa thành tích không?', 'Xóa', 'Đóng');
				mt.toast('info', 'Your Choice: '+ wat);
			},
		};
		mt.init();
	</script>

</body>
</html>
