<!DOCTYPE html>
<html>
<head>

	<title>Sweetalert 2</title>

	<meta charset='utf-8' />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link href="/lib/sweetalert2-11.22.4/borderless.css" type="text/css" rel="stylesheet">
	<!-- <link href="/lib/sweetalert2-11.22.4/bulma.css" type="text/css" rel="stylesheet"> -->
	<!-- <link href="/lib/sweetalert2-11.22.4/embed-iframe.css" type="text/css" rel="stylesheet"> -->
	<!-- <link href="/lib/sweetalert2-11.22.4/minimal.css" type="text/css" rel="stylesheet"> -->
	<!-- <link href="/lib/sweetalert2-11.22.4/sweetalert2.css" type="text/css" rel="stylesheet"> -->
	<script src="/lib/sweetalert2-11.22.4/sweetalert2.all.min.js"></script>

	<style>
		body {
			box-sizing: border-box;
			margin: 0;
			padding: 16px;
			height: 100vh;
		}
	</style>

</head>
<body>

	<!--
		https://sweetalert2.github.io
	-->

	<button onclick="mt.test(1)">Test 1</button>
	<button onclick="mt.test(2)">Test 2</button>
	<button onclick="mt.test(3)">Test 3</button>
	<button onclick="mt.test(4)">Modal</button>
	<button onclick="mt.toast('info', 'Có thông báo mới')">Toast Info</button>
	<button onclick="mt.toast('success', 'Đã lưu thành công')">Toast Success</button>
	<button onclick="mt.toast('warning', 'Chưa nhập trường email')">Toast Warning</button>
	<button onclick="mt.toast('error', 'Không kết nối được máy chủ!')">Toast Error</button>
	<button onclick="mt.inputPassword()">Input Password</button>

	<script type="module">
		var mt = {
			p_toast: null,

			init() {

				// Bind Global
				window.mt = this;

				// Init Toast
				this.p_toast = Swal.mixin({
					toast: true,
					position: 'bottom-end',
					showConfirmButton: false,
					timer: 3000,
					timerProgressBar: true,
					didOpen: (toast) => {
						toast.onmouseenter = Swal.stopTimer;
						toast.onmouseleave = Swal.resumeTimer;
					},
				});
			},
			toast(type, msg) {

				let title = '';
				switch (type) {
					case 'info':
						title = "Thông báo";
						break;
					case 'success':
						title = "Thành công";
						break;
					case 'warning':
						title = "Cảnh báo";
						break;
					case 'error':
						title = "Lỗi";
						break;
					default:
						throw { error: true, msg: "Type không hợp lệ!" };
				}

				// Prepare
				let opts = {
					icon: type,
					title: msg,
				};

				// Show Toast
				this.p_toast.fire(opts);
			},
			confirm(type, title, message, confirm, cancel) {

				if (this.p_confirm != null)
					return;

				return new Promise((resolve, reject) => {
					this.p_confirm = { resolve, reject };
					this.p_confirm.popup = new Notify({
						status: type,
						title: title,
						showCloseButton: false,
						autoclose: false,
						position: 'center',
						text: `
							<div class="confirm-popup">
								<p>${message}</p>
								<div class="group-btn-confirm" style="display:flex;flex-direction:row-reverse;gap:4px;">
									<button class="btn-cancel" onclick="mt.confirmCallback('cancel')">${cancel}</button>
									<button class="btn-confirm" onclick="mt.confirmCallback('confirm')">${confirm}</button>
								</div>
							</div>
						`,
					});
				});
			},
			async inputPassword() {
				const { value: password } = await Swal.fire({
					title: "Enter your password",
					input: "password",
					inputLabel: "Password",
					inputPlaceholder: "Enter your password",
					inputAttributes: {
						maxlength: "10",
						autocapitalize: "off",
						autocorrect: "off"
					}
				});
				if (password) {
					Swal.fire(`Entered password: ${password}`);
				}
			},
			test(num) {
				switch(num) {
					case 1:
						Swal.fire({
							title: "Good job!",
							text: "You clicked the button!",
							icon: "success"
						});
						break;
					case 2:
						Swal.fire("SweetAlert2 is working!");
						break;
					case 3:
						Swal.fire({
							title: "The Internet?",
							text: "That thing is still around?",
							icon: "question"
						});
						break;
					case 4:
						Swal.fire("SweetAlert2 is working!");
						break;
				}
			}
		};
		mt.init();
	</script>

</body>
</html>
