<!DOCTYPE html>
<html>
<head>

	<title>Json Editor</title>

	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- <link href="/lib/bootstrap-3.4.1/css/bootstrap.min.css" type="text/css" rel="stylesheet"> -->
	<link href="/lib/fontawesome-6.7.2/css/all.min.css" type="text/css" rel="stylesheet">
	<link href="/lib/mt/json-editor/mt-style.css" type="text/css" rel="stylesheet">
	<script src="/lib/json-editor-2.15.2/jsoneditor.min.js"></script>
	<!-- <script src="/lib/vanilla-picker-2.0.1/vanilla-picker.min.js"></script> -->
	<link href="/lib/flatpickr/flatpickr.min.css" type="text/css" rel="stylesheet">
	<script src="/lib/flatpickr/flatpickr.min.js"></script>
	<!-- <link href="/lib/choicesjs-11.1.0/base.min.css" type="text/css" rel="stylesheet"> -->
	<!-- <link href="/lib/choicesjs-11.1.0/choices.min.css" type="text/css" rel="stylesheet"> -->
	<!-- <script src="/lib/choicesjs-11.1.0/choices.min.js"></script> -->
	<!-- <link href="/lib/autocomplete/style.css" type="text/css" rel="stylesheet"> -->
	<!-- <script src="/lib/autocomplete/autocomplete.min.js"></script> -->

	<style>
		body {
			box-sizing: border-box;
			margin: 0;
			padding: 16px;
			height: 100vh;
			background-color: white;
		}
	</style>

</head>
<body>

	<!--
		https://github.com/jdorn/json-editor
		https://github.com/json-editor/json-editor
	-->

	<div id="json-editor" class="json-editor"></div>

	<script type="module">
		import JsonEditorEX from '/lib/mt/json-editor/mt-script.js';
		var mt = {
			m_editor: null,

			init() {

				// Bind Global
				window.mt = this;

				// JsonEditor
				JsonEditorEX.RateRegister();
				JsonEditorEX.TagBoxRegister();
				const element = document.getElementById('json-editor');
				this.m_editor = new JSONEditor(element, {
					use_name_attributes: false,
					theme: 'barebones',
					iconlib: 'fontawesome5',
					disable_edit_json: false,
					disable_properties: false,
					disable_collapse: false,
					schema: {
						title: 'Form Json',
						type: 'object',
						required: [
							'propString',
							'propNumber',
							'propSelectBox',
							'propDate',
							'propColor',
							'propArray',
							'propObject',
						],
						properties: {
							'propHidden': {
								title: 'Field Hidden',
								type: 'string',
								format: 'hidden',
								options: {
									titleHidden: true
								},
							},
							'propString': {
								title: 'Field String',
								type: 'string',
								format: 'text',
								minLength: 0,
								default: 'someText',
								// description: 'Property String',
							},
							'propEmail': {
								title: 'Field Email',
								type: 'string',
								format: 'email',
								default: 'trinm@gmail.com',
							},
							'propPassword': {
								title: 'Field Password',
								type: 'string',
								format: 'password',
								default: 'password',
							},
							'propTelephone': {
								title: 'Field Telephone',
								type: 'string',
								format: 'tel',
							},
							'propURL': {
								title: 'Field URL',
								type: 'string',
								format: 'url',
								default: 'http://www.google.com',
							},
							'propSearch': {
								title: 'Field Search',
								type: 'string',
								format: 'search',
							},
							'propNumber': {
								title: 'Field Number',
								type: 'string',
								format: 'number',
								default: 123,
								minimum: 0,
								maximum: 9999,
							},
							'propInteger': {
								title: 'Field Integer',
								type: 'integer',
								default: 123,
								minimum: 0,
								maximum: 9999,
							},
							'propDecimal': {
								title: 'Field Decimal',
								type: 'number',
								default: 123.555,
								minimum: 0,
								maximum: 9999,
							},
							'propRange': {
								title: 'Field Range',
								type: 'integer',
								format: 'range',
								default: 8,
								minimum: 0,
								maximum: 10,
								multipleOf: 2,
								// description: 'Property Number',
							},
							'propCheckbox': {
								title: 'Field Checkbox',
								type: 'string',
								format: 'checkbox',
							},
							'propButton': {
								title: 'Field Button',
								type: 'string',
								format: 'button',
							},
							'propReset': {
								title: 'Field Reset',
								type: 'string',
								format: 'reset',
							},
							'propSubmit': {
								title: 'Field Submit',
								type: 'string',
								format: 'submit',
							},
							// 'propAutoComplete': {
							// 	title: 'Field AutoComplete',
							// 	type: 'string',
							// 	format: 'autocomplete',
							// 	enum: ["Việt Nam", "Hoa Kỳ", "Nhật Bản", "Hàn Quốc", "Singapore"],
							// 	options: {
							// 		// enum_titles: ["Việt Nam", "Hoa Kỳ", "Nhật Bản", "Hàn Quốc", "Singapore"],
							// 		autocomplete: {
							// 			search: (text) => {
							// 				console.log('search:', text);
							// 			},
							// 			onSubmit: () => {
							// 				console.log('onSubmit');
							// 			},
							// 		},
							// 	},
							// },
							// 'propColor2': { // LIB: vanilla-picker
							// 	title: 'Field Color 2',
							// 	type: 'string',
							// 	format: 'color',
							// 	default: '#ffa500',
							// 	options: {
							// 		colorpicker: {
							// 			alpha: true,
							// 			// editorFormat: 'rgb', // rgb, hls
							// 			// popup: false, // top, right, left, false
							// 		}
							// 	}
							// },
							'propSelectBox': {
								title: 'Field SelectBox',
								type: 'string',
								enum: ['male','female','other'],
								// description: 'Property SelectBox',
							},
							'propRadio': {
								title: 'Field Radio',
								type: 'string',
								format: 'radio',
								enum: ['male','female','other'],
							},
							// 'propChoiceSelect': {
							// 	title: 'Field Choice - Select',
							// 	type: 'string',
							// 	format: 'choices',
							// 	enum: ['male','female','other'],
							// 	// description: 'Property SelectBox',
							// },
							'propDate': {
								title: 'Field Date',
								type: 'string',
								format: 'date',
								default: '2025-08-20',
								options: {
									inputAttributes: {
										lang: 'vi'
									},
									// 	flatpickr: {}
								},
							},
							'propDateTime': {
								title: 'Field DateTime',
								type: 'string',
								format: 'datetime-local',
								default: '2025-08-07T16:59',
								// options: {
								// 	flatpickr: {}
								// },
								// description: 'Property Date',
							},
							'propTime': {
								title: 'Field Time',
								type: 'string',
								format: 'time',
								default: '2025-08-20',
								// options: {
								// 	flatpickr: {}
								// },
								// description: 'Property Time',
							},
							'propMonth': {
								title: 'Field Month',
								type: 'string',
								format: 'month',
							},
							'propWeek': {
								title: 'Field Week',
								type: 'string',
								format: 'week',
							},
							'propFlatPickr': { // LIB: flatpickr
								title: 'Field FlatPickr',
								type: 'string',
								format: 'date',
								default: '2025-08-20',
								options: {
									flatpickr: {}
								},
								// description: 'Property Date',
							},
							'propColor': {
								title: 'Field Color',
								type: 'string',
								format: 'color',
								default: '#ffa500',
								// description: 'Property Color',
							},
							'propImage': {
								title: 'Field Image',
								type: 'string',
								format: 'image',
							},
							'propFile': {
								title: 'Field File',
								type: 'string',
								format: 'file',
							},
							'propTextarea': {
								title: 'Field Textarea',
								type: 'string',
								format: 'textarea',
								minLength: 0,
								default: 'someText',
								options: {
									input_height : '52px',
								},
							},
							// 'propMarkdown': {
							// 	type: 'string',
							// 	format: 'markdown'
							// },
							'propArray': {
								title: 'Field Array',
								type: 'array',
								format: 'table',
								uniqueItems: true,
								items: {
									title: 'Pet',
									type: 'object',
									properties: {
										'type': {
											type: 'string',
											enum: ['cat', 'dog', 'bird', 'reptile', 'other'],
											default: 'dog'
										},
										'name': {
											type: 'string'
										}
									}
								},
								default: [
									{
										'type': 'dog',
										'name': 'Walter'
									}
								]
							},
							'propObject': {
								title: 'Field Object',
								type: 'object',
								properties: {
									'city': {
										type: 'string',
										default: 'San Francisco'
									},
									'state': {
										type: 'string',
										default: 'CA'
									},
									'citystate': {
										type: 'string',
										// description: 'This is generated automatically from the previous two fields',
										template: '{{city}}, {{state}}',
										watch: {
											'city': 'location.city',
											'state': 'location.state'
										}
									}
								}
							},
							'propRate': {
								title: 'Field Rate',
								type: 'integer',
								format: 'rate',
								default: 3,
							},
							'propTags': {
								"title": "Tags",
								"type": "array",
								"format": "tagbox",
								"items": {
									"type": "string"
								}
							},
						}
					},
				});

				// editor.setValue({name: "John Smith"});
				// const value = editor.getValue();
				// const name = editor.getEditor('root.name');

			},
			getForm() {
				return this.m_editor.getValue();
			},
			setForm(data) {
				this.m_editor.setValue(data);
			},
		};
		mt.init();
	</script>

</body>
</html>
